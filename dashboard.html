<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - The Nursing Collective</title>
    <meta name="description" content="Manage your study guides, track progress, and access your premium content.">
    <!-- Build: v4.0.1768966858 - 2026-01-20 -->

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/images/favicon-96x96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">

    <!-- Theme Color -->
    <meta name="theme-color" content="#2E86AB">

    <!-- Preconnect to external resources for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>

    <!-- Bundled CSS (Bootstrap + custom styles, purged and minified) -->
    <link rel="stylesheet" href="css/bundle.min.css">

    <!-- Pages CSS (dashboard-specific styles) -->
    <link rel="stylesheet" href="css/pages.css?v=5.3.navbar">

    <!-- Global overrides (must load AFTER pages.css to win cascade) -->
    <link rel="stylesheet" href="css/global-overrides.css?v=6.1.sidebar">


    <!-- Bootstrap 5 CSS -->


    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Source+Sans+3:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Dashboard layout (inline to avoid cache issues with external CSS) -->
    <style>
        /* Sidebar layout */
        .dash-layout{display:flex!important;min-height:calc(100vh - 70px)}
        .dash-sidebar{width:220px;flex-shrink:0;border-right:1px solid rgba(0,0,0,.06);padding-top:24px;position:sticky;top:70px;height:calc(100vh - 70px);overflow-y:auto;background:#fff}
        .dash-sidebar-inner{padding:0 12px;display:flex;flex-direction:column;gap:8px}
        .dash-sidebar-section{display:flex;flex-direction:column;gap:2px;padding-bottom:12px;border-bottom:1px solid rgba(0,0,0,.06);margin-bottom:4px}
        .dash-sidebar-section:last-child{border-bottom:none;margin-bottom:0}
        .dash-sidebar-item{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:8px;font-family:'Source Sans 3',sans-serif;font-size:.88rem;font-weight:500;color:#94a3b8;text-decoration:none;transition:all .15s ease;cursor:pointer}
        .dash-sidebar-item:hover{background:rgba(46,134,171,.04);color:#0f172a;text-decoration:none}
        .dash-sidebar-item.active{background:rgba(46,134,171,.1);color:#2E86AB;font-weight:600}
        .dash-sidebar-item i{font-size:.95rem;width:20px;text-align:center;flex-shrink:0}
        .dash-main{flex:1;min-width:0;padding:24px 0}
        /* Dark mode sidebar */
        [data-theme="dark"] .dash-sidebar{background:#1e293b;border-color:rgba(255,255,255,.06)}
        [data-theme="dark"] .dash-sidebar-section{border-color:rgba(255,255,255,.06)}
        [data-theme="dark"] .dash-sidebar-item{color:#6b7280}
        [data-theme="dark"] .dash-sidebar-item:hover{background:rgba(255,255,255,.04);color:#f1f5f9}
        [data-theme="dark"] .dash-sidebar-item.active{background:rgba(46,134,171,.15);color:#3bb8e0}
        /* Stats row */
        .dash-stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:24px;max-width:1000px}
        .dash-stat{background:#f8fafc;border-radius:10px;padding:16px 12px;text-align:center}
        .dash-stat-num{font-family:'Outfit',sans-serif;font-size:1.5rem;font-weight:700;color:#0f172a;line-height:1.2}
        .dash-stat-label{font-family:'Source Sans 3',sans-serif;font-size:.75rem;font-weight:500;color:#94a3b8;margin-top:4px;text-transform:uppercase;letter-spacing:.05em}
        [data-theme="dark"] .dash-stat{background:rgba(255,255,255,.04)}
        [data-theme="dark"] .dash-stat-num{color:#f1f5f9}
        [data-theme="dark"] .dash-stat-label{color:#6b7280}
        /* Dashboard section padding reset */
        .dashboard{background:var(--dash-bg,#f8fafc)!important;padding:70px 0 0!important}
        [data-theme="dark"] .dashboard{background:var(--dash-bg,#0f172a)!important}
        /* Hide breadcrumbs & quick actions on desktop */
        .breadcrumbs-dashboard{display:none!important}
        .quick-actions-hero{display:none!important}
        /* Mobile: hide sidebar, show quick actions */
        @media(max-width:768px){
            .dash-sidebar{display:none}
            .dash-layout{display:block!important}
            .quick-actions-hero{display:block!important}
            .dash-stats-row{grid-template-columns:repeat(2,1fr)}
        }
    </style>

    <!-- Sentry Error Tracking (load first) -->
    <script src="https://browser.sentry-cdn.com/8.40.0/bundle.min.js" crossorigin="anonymous"></script>
    <script src="sentry-init.js"></script>
    <script src="lockscreen.js"></script>
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Page Loader -->
    <div class="page-loader" id="page-loader">
        <div class="loader-spinner"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html">
                    <img src="assets/images/the-nursing-collective-logo.webp" alt="The Nursing Collective Logo" class="nav-logo">
                </a>
            </div>
            <div class="nav-links">
                <a href="dashboard.html" class="active">Dashboard</a>
                <a href="resources.html">Resources</a>
                <a href="pricing.html">Pricing</a>
                <a href="about.html">About</a>
                <div class="user-menu">
                    <button class="user-avatar" id="user-menu-btn" title="Account menu">
                        <i class="fas fa-user-circle"></i>
                    </button>
                    <div class="user-dropdown" id="user-dropdown">
                        <div class="user-dropdown-header">
                            <div class="user-avatar-large">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="user-info">
                                <span class="user-name" id="dropdown-user-name">Loading...</span>
                                <span class="user-email" id="dropdown-user-email">Loading...</span>
                            </div>
                        </div>
                        <div class="user-dropdown-divider"></div>
                        <div class="theme-selector">
                            <span class="theme-selector-label"><i class="fas fa-palette"></i> Theme</span>
                            <div class="theme-selector-options">
                                <button class="theme-option" data-theme-mode="light" title="Light mode">
                                    <i class="fas fa-sun"></i>
                                </button>
                                <button class="theme-option" data-theme-mode="dark" title="Dark mode">
                                    <i class="fas fa-moon"></i>
                                </button>
                                <button class="theme-option" data-theme-mode="system" title="System preference">
                                    <i class="fas fa-desktop"></i>
                                </button>
                            </div>
                        </div>
                        <div class="user-dropdown-divider"></div>
                        <a href="dashboard.html#subscription"><i class="fas fa-crown"></i> My Subscription</a>
                        <a href="settings.html"><i class="fas fa-cog"></i> Account Settings</a>
                        <div class="user-dropdown-divider"></div>
                        <a href="contact.html"><i class="fas fa-question-circle"></i> Help & Support</a>
                        <a href="#logout" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
            <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Toggle navigation menu" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Breadcrumbs -->
    <div class="breadcrumbs breadcrumbs-dashboard">
        <div class="container">
            <a href="index.html">Home</a>
            <span class="separator">/</span>
            <span class="current">Dashboard</span>
        </div>
    </div>

    <!-- Dashboard -->
    <main id="main-content">
    <section class="dashboard">
        <div class="dash-layout">
            <!-- Sidebar Navigation -->
            <aside class="dash-sidebar">
                <div class="dash-sidebar-inner">
                    <div class="dash-sidebar-section">
                        <a href="dashboard.html" class="dash-sidebar-item active">
                            <i class="fas fa-th-large"></i> Dashboard
                        </a>
                        <a href="study-guides.html" class="dash-sidebar-item">
                            <i class="fas fa-book-open"></i> Study Guides
                        </a>
                        <a href="https://learn.thenursingcollective.pro" class="dash-sidebar-item" id="sidebar-quiz-link" style="display:none;">
                            <i class="fas fa-brain"></i> Quiz Bank
                        </a>
                        <a href="resources.html" class="dash-sidebar-item">
                            <i class="fas fa-book-reader"></i> Resources
                        </a>
                    </div>
                    <div class="dash-sidebar-section">
                        <a href="pricing.html" class="dash-sidebar-item" id="sidebar-subscription-link">
                            <i class="fas fa-crown"></i> Subscription
                        </a>
                        <a href="https://discord.gg/y2Mh77wAV2" class="dash-sidebar-item" target="_blank" rel="noopener">
                            <i class="fab fa-discord"></i> Community
                        </a>
                        <a href="settings.html" class="dash-sidebar-item">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                    </div>
                    <div class="dash-sidebar-section dash-sidebar-admin hidden" id="sidebar-admin-section">
                        <a href="admin.html" class="dash-sidebar-item">
                            <i class="fas fa-user-shield"></i> Admin Panel
                        </a>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="dash-main">
        <div class="container">
            <!-- Dashboard Header -->
            <div class="dashboard-header-compact">
                <h1>Welcome back, <span id="user-first-name">User</span>!
                    <span id="premium-badge"></span>
                    <span id="admin-badge"></span>
                </h1>
                <div class="user-stats-compact">
                    <span class="stat-inline" id="subscription-status-inline">
                        <i class="fas fa-crown"></i>
                        <span id="guides-count">--</span>
                    </span>
                    <span class="stat-inline">
                        <i class="fas fa-calendar-alt"></i>
                        Member since <span id="member-since">Jan 2026</span>
                    </span>
                </div>
            </div>

            <!-- Stats Row (matches hero mockup) -->
            <div class="dash-stats-row">
                <div class="dash-stat">
                    <div class="dash-stat-num" id="stat-guides-count">--</div>
                    <div class="dash-stat-label">Study Guides</div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-num" id="stat-practice-qs">2,400+</div>
                    <div class="dash-stat-label">Practice Qs</div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-num" id="stat-avg-score">--</div>
                    <div class="dash-stat-label">Avg. Score</div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-num" id="stat-streak">--</div>
                    <div class="dash-stat-label">Day Streak</div>
                </div>
            </div>

            <!-- Email Verification Banner -->
            <div id="email-verification-banner" class="verification-banner hidden">
                <div class="verification-banner-inner">
                    <div class="verification-banner-content">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div>
                            <h4>Verify Your Email</h4>
                            <p>Please check your inbox and verify your email address to unlock all features.</p>
                        </div>
                    </div>
                    <button id="resend-verification-btn" class="verification-banner-btn">
                        <i class="fas fa-paper-plane"></i> Resend Email
                    </button>
                </div>
            </div>

            <!-- Quick Actions Hero -->
            <section class="quick-actions-hero">
                <div class="quick-actions-grid-hero">
                    <button class="action-card-hero primary" data-navigate="study-guides.html">
                        <div class="action-icon-large"><i class="fas fa-book-open"></i></div>
                        <h3>Browse Study Guides</h3>
                        <p>Explore NCLEX resources</p>
                    </button>
                    <button class="action-card-hero hidden" id="quiz-bank-action-btn" data-navigate="https://learn.thenursingcollective.pro">
                        <div class="action-icon-large"><i class="fas fa-brain"></i></div>
                        <h3>Quiz Bank</h3>
                        <p>Practice questions by topic</p>
                    </button>
                    <button class="action-card-hero" id="subscription-action-btn" data-navigate="pricing.html">
                        <div class="action-icon-large"><i class="fas fa-rocket"></i></div>
                        <h3 id="subscription-action-title">View Plans</h3>
                        <p id="subscription-action-desc">Get a subscription</p>
                    </button>
                    <button class="action-card-hero" data-external="https://discord.gg/y2Mh77wAV2">
                        <div class="action-icon-large"><i class="fab fa-discord"></i></div>
                        <h3>Join Discord</h3>
                        <p>Connect with community</p>
                    </button>
                    <button class="action-card-hero" data-navigate="settings.html">
                        <div class="action-icon-large"><i class="fas fa-cog"></i></div>
                        <h3>Settings</h3>
                        <p>Manage your account</p>
                    </button>
                    <button class="action-card-hero admin-only admin-action hidden" id="admin-panel-btn" data-navigate="admin.html">
                        <div class="action-icon-large"><i class="fas fa-user-shield"></i></div>
                        <h3>Admin Panel</h3>
                        <p>Manage users & guides</p>
                    </button>
                </div>
            </section>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Getting Started Card (only shows for new users) -->
                <div class="dashboard-card getting-started-card hidden" id="getting-started-card">
                    <h3><i class="fas fa-rocket"></i> Welcome to The Nursing Collective!</h3>
                    <p>Get started with these quick steps to make the most of your account:</p>
                    <div class="getting-started-grid">
                        <div class="getting-started-step">
                            <i class="fas fa-book-open"></i>
                            <h4>Browse Study Guides</h4>
                            <p>Explore our NCLEX-focused study materials</p>
                        </div>
                        <div class="getting-started-step">
                            <i class="fab fa-discord"></i>
                            <h4>Join Our Community</h4>
                            <p>Connect with fellow nursing students on Discord</p>
                        </div>
                        <div class="getting-started-step">
                            <i class="fas fa-rocket"></i>
                            <h4>Choose a Plan</h4>
                            <p>Subscribe to unlock all study guides and resources</p>
                        </div>
                    </div>
                    <button class="getting-started-dismiss-btn" id="dismiss-getting-started-btn">
                        <i class="fas fa-check"></i> Got it!
                    </button>
                </div>

                <!-- Two-Column Hub: Recent Guides + Quiz Progress -->
                <div class="dashboard-two-col">
                    <!-- Recent Guides Widget -->
                    <div class="recent-guides-widget">
                        <div class="widget-header">
                            <h3><i class="fas fa-book-medical"></i> Recent Guides</h3>
                            <a href="study-guides.html" class="widget-header-link">Browse All →</a>
                        </div>
                        <div id="recent-guides-list" class="recent-guides-list">
                            <!-- Loading skeleton -->
                            <div class="skeleton-loader">
                                <div class="skeleton skeleton-card skeleton-row"></div>
                                <div class="skeleton skeleton-card skeleton-row"></div>
                                <div class="skeleton skeleton-card skeleton-row"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Quiz Bank Progress Widget -->
                    <div class="qb-summary-widget hidden" id="quiz-bank-dashboard-section">
                        <div class="widget-header">
                            <h3><i class="fas fa-brain"></i> Quiz Progress</h3>
                            <a href="https://learn.thenursingcollective.pro" class="widget-header-link" id="qb-continue-btn">Continue →</a>
                        </div>

                        <!-- Empty State -->
                        <div id="qb-empty-state" class="qb-empty-state hidden">
                            <div class="qb-empty-state-icon"><i class="fas fa-brain"></i></div>
                            <h4>Track Your Progress</h4>
                            <p>Start a quiz to see your stats here.</p>
                            <button class="btn btn-primary btn-sm" data-navigate="https://learn.thenursingcollective.pro">
                                <i class="fas fa-rocket"></i> Start Practicing
                            </button>
                        </div>

                        <!-- Stats (when data exists) -->
                        <div id="qb-mastery-overview" class="hidden">
                            <div class="qb-stats-row">
                                <div class="qb-stat-card">
                                    <div class="qb-stat-number" id="qb-avg-level">0</div>
                                    <div class="qb-stat-label">Avg Level</div>
                                </div>
                                <div class="qb-stat-card">
                                    <div class="qb-stat-number" id="qb-topics-practiced">0</div>
                                    <div class="qb-stat-label">Topics</div>
                                </div>
                                <div class="qb-stat-card">
                                    <div class="qb-stat-number" id="qb-topics-mastered">0</div>
                                    <div class="qb-stat-label">Mastered</div>
                                </div>
                                <div class="qb-stat-card">
                                    <div class="qb-stat-number" id="qb-total-answered">0</div>
                                    <div class="qb-stat-label">Answered</div>
                                </div>
                                <div class="qb-stat-card">
                                    <div class="qb-stat-number" id="qb-accuracy">0%</div>
                                    <div class="qb-stat-label">Accuracy</div>
                                </div>
                                <div class="qb-stat-card">
                                    <div class="qb-stat-number" id="qb-streak">0</div>
                                    <div class="qb-stat-label">Streak</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resources & Quick Reference -->
                <div class="dashboard-card resources-dashboard-card">
                    <div class="resources-dashboard-header">
                        <h3><i class="fas fa-book-reader"></i> Resources & Quick Reference</h3>
                    </div>
                    <div id="resources-section" class="resources-dashboard-content">
                        <div class="skeleton-loader">
                            <div class="skeleton skeleton-card skeleton-row"></div>
                            <div class="skeleton skeleton-card skeleton-row"></div>
                        </div>
                    </div>
                </div>

                <!-- Account & Subscription (combined) -->
                <div class="widget widget-account-enhanced">
                    <div class="widget-account-grid">
                        <!-- Left: Account Info -->
                        <div class="account-info-section">
                            <h3><i class="fas fa-user"></i> Account</h3>
                            <div class="widget-content">
                                <div class="info-row">
                                    <span class="label">Name</span>
                                    <span class="value" id="widget-user-name">Loading...</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Email</span>
                                    <span class="value" id="widget-user-email">Loading...</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Discord</span>
                                    <span class="status-badge disconnected" id="widget-discord-status">
                                        <i class="fas fa-times-circle"></i> Not connected
                                    </span>
                                </div>
                            </div>
                        </div>
                        <!-- Right: Subscription -->
                        <div class="account-stats-section">
                            <div class="subscription-management-container" id="subscription-management-container">
                                <!-- Loading skeleton -->
                                <div class="skeleton-loader">
                                    <div class="skeleton skeleton-card skeleton-row-lg"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
            </div> <!-- end .dash-main -->
        </div> <!-- end .dash-layout -->
    </section>

    <!-- Admin User Management Modal -->
    <div class="modal-overlay hidden" id="admin-user-modal">
        <div class="modal-content admin-user-modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Users</h2>
                <button class="modal-close" id="close-admin-modal-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="user-filters admin-filter-bar">
                    <button class="filter-btn active" data-filter="all">All Users</button>
                    <button class="filter-btn" data-filter="today">Joined Today</button>
                    <button class="filter-btn" data-filter="yesterday">Joined Yesterday</button>
                    <button class="filter-btn" data-filter="week">This Week</button>
                    <button class="filter-btn" data-filter="premium">Premium</button>
                    <button class="filter-btn" data-filter="free">Free</button>
                </div>
                <div id="users-table-container">
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Users will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <span>The Nursing Collective</span>
                    </div>
                    <p>Empowering nursing students with comprehensive study guides, practice questions, and resources for academic success.</p>
                </div>

                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="resources.html">Resources</a></li>
                        <li><a href="pricing.html">Pricing</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="https://learn.thenursingcollective.pro">Quiz Bank</a></li>
                        <li><a href="https://discord.gg/y2Mh77wAV2">Discord</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Contact</h4>
                    <p>
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:support@thenursingcollective.pro">support@thenursingcollective.pro</a>
                    </p>
                    <div class="social-links">
                        <a href="https://discord.gg/y2Mh77wAV2" aria-label="Discord" target="_blank" rel="noopener">
                            <i class="fab fa-discord"></i>
                        </a>
                    </div>
                </div>

                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2026 The Nursing Collective. Built with care for nursing students.</p>
                <p class="footer-attribution">
                    Icons by <a href="https://www.flaticon.com/authors/freepik" title="Freepik" target="_blank" rel="noopener">Freepik</a> & <a href="https://www.flaticon.com/authors/slamlabs" title="Slamlabs" target="_blank" rel="noopener">Slamlabs</a> - <a href="https://www.flaticon.com" title="Flaticon" target="_blank" rel="noopener">Flaticon</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!-- Custom Modal System -->
    <script src="modal.js"></script>

    <!-- Dark Mode Manager -->
    <script src="dark-mode.js"></script>

    <!-- API Service Layer -->
    <script src="api-service.js?v=1769142741"></script>


    <script src="script.js?v=4.8.dashboard"></script>

    <!-- Quiz Bank Mastery (registry + mastery tracker for dashboard section) -->
    <script src="app/data/registry.js"></script>
    <script src="app/mastery.js"></script>

    <script src="dashboard-script.js?v=5.2.cleanup"></script>
</body>
</html>
