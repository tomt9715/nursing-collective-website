<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - The Nursing Collective</title>
    <meta name="description" content="Manage your study guides, track progress, and access your premium content.">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png">

    <!-- Theme Color -->
    <meta name="theme-color" content="#2E86AB">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="auth-styles.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Source+Sans+3:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Page Loader -->
    <div class="page-loader" id="page-loader">
        <div class="loader-spinner"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html">
                    <img src="assets/images/the-nursing-collective-logo.png" alt="The Nursing Collective Logo" class="nav-logo">
                </a>
            </div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="guides.html">Study Guides</a>
                <a href="pricing.html">Pricing</a>
                <a href="store.html">Store</a>
                <a href="about-florencebot.html">About FlorenceBot</a>
                <a href="dashboard.html" class="active">Dashboard</a>
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                    <i class="fas fa-sun light-icon"></i>
                    <i class="fas fa-moon dark-icon"></i>
                </button>
                <div class="user-menu">
                    <button class="user-avatar" id="user-menu-btn">
                        <i class="fas fa-user-circle"></i>
                    </button>
                    <div class="user-dropdown" id="user-dropdown">
                        <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                        <a href="settings.html"><i class="fas fa-cog"></i> Settings</a>
                        <a href="#logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Dashboard -->
    <section class="dashboard">
        <div class="container">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <h1>Welcome back!</h1>
                <div class="user-stats">
                    <div class="stat">
                        <span class="number" id="guides-owned">0</span>
                        <span class="label">Guides Owned</span>
                    </div>
                    <div class="stat">
                        <span class="number" id="total-purchases">0</span>
                        <span class="label">Total Purchases</span>
                    </div>
                    <div class="stat">
                        <span class="number" id="member-since">Jan 2026</span>
                        <span class="label">Member Since</span>
                    </div>
                </div>
            </div>

            <!-- Email Verification Banner -->
            <div id="email-verification-banner" style="display: none; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 20px; border-radius: 16px; margin-bottom: 24px; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);">
                <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 32px;"></i>
                        <div>
                            <h4 style="color: white; margin: 0 0 6px 0; font-size: 1.1rem;">Verify Your Email</h4>
                            <p style="margin: 0; opacity: 0.95; font-size: 0.95rem;">Please check your inbox and verify your email address to unlock all features.</p>
                        </div>
                    </div>
                    <button id="resend-verification-btn" style="background: white; color: #d97706; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; white-space: nowrap;">
                        <i class="fas fa-paper-plane"></i> Resend Email
                    </button>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Getting Started Card (only shows for new users) -->
                <div class="dashboard-card" id="getting-started-card" style="grid-column: 1 / -1; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; display: none;">
                    <h3 style="color: white;"><i class="fas fa-rocket"></i> Welcome to The Nursing Collective!</h3>
                    <p style="margin: 16px 0; opacity: 0.95;">Get started with these quick steps to make the most of your account:</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 20px;">
                        <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px;">
                            <i class="fas fa-book-open" style="font-size: 32px; margin-bottom: 12px;"></i>
                            <h4 style="color: white; font-size: 1rem; margin-bottom: 8px;">Browse Study Guides</h4>
                            <p style="font-size: 0.9rem; opacity: 0.9;">Explore our NCLEX-focused study materials</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px;">
                            <i class="fab fa-discord" style="font-size: 32px; margin-bottom: 12px;"></i>
                            <h4 style="color: white; font-size: 1rem; margin-bottom: 8px;">Join Our Community</h4>
                            <p style="font-size: 0.9rem; opacity: 0.9;">Connect with fellow nursing students on Discord</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px;">
                            <i class="fas fa-store" style="font-size: 32px; margin-bottom: 12px;"></i>
                            <h4 style="color: white; font-size: 1rem; margin-bottom: 8px;">Browse the Store</h4>
                            <p style="font-size: 0.9rem; opacity: 0.9;">Purchase individual guides or full class packages</p>
                        </div>
                    </div>
                    <button style="background: white; color: #667eea; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; margin-top: 20px; cursor: pointer;" onclick="document.getElementById('getting-started-card').style.display='none';">
                        <i class="fas fa-check"></i> Got it!
                    </button>
                </div>

                <!-- My Study Guides Card -->
                <div class="dashboard-card">
                    <h3><i class="fas fa-book-medical"></i> My Study Guides</h3>
                    <div class="guide-list" id="guide-list">
                        <!-- Empty state -->
                        <div class="empty-state" style="text-align: center; padding: 60px 20px;">
                            <i class="fas fa-book-open" style="font-size: 64px; color: var(--primary-color); opacity: 0.3; margin-bottom: 20px;"></i>
                            <h4 style="color: var(--text-primary); margin-bottom: 12px;">No Study Guides Yet</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 24px;">Get started by browsing our collection of NCLEX-focused study materials</p>
                        </div>
                    </div>

                    <button class="btn-secondary btn-pulse" style="width: 100%; margin-top: 20px;" onclick="window.location.href='guides.html'">
                        <i class="fas fa-plus"></i> Browse Study Guides
                    </button>
                </div>

                <!-- Discord Connection Card -->
                <div class="dashboard-card" id="discord-card">
                    <h3><i class="fab fa-discord"></i> Discord Connection</h3>
                    <div class="discord-status">
                        <span class="status" id="discord-status">
                            <i class="fas fa-times-circle"></i> Not Connected
                        </span>
                        <p style="margin-top: 16px;" id="discord-info">
                            Connect your Discord account to access FlorenceBot commands and join The Nursing Collective community
                        </p>
                        <button class="btn-secondary" style="margin-top: 20px;" onclick="window.open('https://discord.gg/y2Mh77wAV2', '_blank')">
                            <i class="fab fa-discord"></i> Join Discord Server
                        </button>
                    </div>
                </div>

                <!-- My Purchases Card -->
                <div class="dashboard-card" id="purchases-card">
                    <h3><i class="fas fa-shopping-bag"></i> My Purchases</h3>
                    <div id="purchases-list">
                        <!-- Empty state -->
                        <div class="empty-state" style="text-align: center; padding: 40px 20px;">
                            <i class="fas fa-shopping-cart" style="font-size: 48px; color: var(--primary-color); opacity: 0.3; margin-bottom: 16px;"></i>
                            <h4 style="color: var(--text-primary); margin-bottom: 8px; font-size: 1rem;">No Purchases Yet</h4>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 20px;">Browse our store to purchase individual guides or class packages</p>
                            <button class="btn-secondary" onclick="window.location.href='store.html'" style="margin-top: 12px;">
                                <i class="fas fa-store"></i> Browse Store
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Recommended Guides Card -->
                <div class="dashboard-card" style="grid-column: span 1;">
                    <h3><i class="fas fa-star"></i> Recommended for You</h3>
                    <div id="recommended-guides">
                        <div class="empty-state" style="text-align: center; padding: 40px 20px;">
                            <i class="fas fa-lightbulb" style="font-size: 48px; color: var(--primary-color); opacity: 0.3; margin-bottom: 16px;"></i>
                            <h4 style="color: var(--text-primary); margin-bottom: 8px; font-size: 1rem;">Personalized Recommendations</h4>
                            <p style="color: var(--text-secondary); font-size: 0.9rem;">Complete your profile to get personalized study guide recommendations</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Card -->
                <div class="dashboard-card" style="grid-column: span 1;">
                    <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                    <div class="quick-actions">
                        <button class="quick-action-btn" onclick="window.location.href='store.html'">
                            <i class="fas fa-store"></i>
                            <span>Browse Store</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='guides.html'">
                            <i class="fas fa-book-open"></i>
                            <span>Study Guides</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.open('https://discord.gg/y2Mh77wAV2', '_blank')">
                            <i class="fab fa-discord"></i>
                            <span>Join Discord</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='settings.html'">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin User Management Modal -->
    <div class="modal-overlay" id="admin-user-modal" style="display: none;">
        <div class="modal-content" style="max-width: 900px; max-height: 80vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 id="modal-title">Users</h2>
                <button class="modal-close" onclick="closeAdminModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="user-filters" style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button class="filter-btn active" data-filter="all">All Users</button>
                    <button class="filter-btn" data-filter="today">Joined Today</button>
                    <button class="filter-btn" data-filter="yesterday">Joined Yesterday</button>
                    <button class="filter-btn" data-filter="week">This Week</button>
                    <button class="filter-btn" data-filter="premium">Premium</button>
                    <button class="filter-btn" data-filter="free">Free</button>
                </div>
                <div id="users-table-container">
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Users will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <span>The Nursing Collective</span>
                    </div>
                    <p>Empowering nursing students with AI-powered clinical references and study tools.</p>
                </div>

                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="guides.html">Study Guides</a></li>
                        <li><a href="pricing.html">Pricing</a></li>
                        <li><a href="https://discord.gg/y2Mh77wAV2">Discord Server</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Contact</h4>
                    <p>
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:support@thenursingcollective.pro">support@thenursingcollective.pro</a>
                    </p>
                    <div class="social-links">
                        <a href="https://discord.gg/y2Mh77wAV2" aria-label="Discord" target="_blank" rel="noopener">
                            <i class="fab fa-discord"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2026 The Nursing Collective. Built with ❤️ for nursing students.</p>
                <p style="font-size: 0.7rem; margin-top: 8px; opacity: 0.5;">
                    <a href="https://www.flaticon.com/free-icons/education" title="education icons" target="_blank" rel="noopener" style="color: inherit; text-decoration: none;">Icons by Freepik - Flaticon</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom Modal System -->
    <link rel="stylesheet" href="modal.css">
    <script src="modal.js"></script>

    <!-- Dark Mode Manager -->
    <script src="dark-mode.js"></script>

    <script src="script.js?v=3.1"></script>
    <script src="dashboard-script.js?v=3.1"></script>
</body>
</html>
